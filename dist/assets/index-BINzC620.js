var v=Object.defineProperty;var L=(t,e,o)=>e in t?v(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o;var a=(t,e,o)=>(L(t,typeof e!="symbol"?e+"":e,o),o);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function o(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=o(n);fetch(n.href,r)}})();class C{constructor(e){a(this,"title");a(this,"author");a(this,"pages");a(this,"isRead");this.title=e.title,this.author=e.author,this.pages=e.pages,this.isRead=e.isRead}}class S{constructor(){a(this,"Books");this.Books=[]}addBookToLibrary(e){this.isBookInLibrary(e)||this.Books.push(e)}isBookInLibrary(e){return this.Books.some(o=>o.title===e.title)}bookLookup(e){return this.Books.find(o=>o.title===e)}removeBook(e){const o=this.Books.findIndex(s=>s.title===e);this.Books.splice(o,1)}}const d=document.querySelector("#add-book-modal"),p=document.querySelector("#card-container"),E=document.querySelector("#submit-btn"),q=document.querySelector("#cancel-btn"),b=document.querySelector("#book-title"),h=document.querySelector("#book-author"),y=document.querySelector("#book-pages"),g=document.querySelector("#book-read"),u=document.querySelector("#add-book-modal h3"),i=new S;document.addEventListener("click",t=>{t.target.contains(d)&&d.close()});document.addEventListener("keydown",t=>{t.key==="Escape"&&d.close()});const R=document.querySelector("#add-btn");R.addEventListener("click",()=>{d.showModal(),I()});q.addEventListener("click",()=>{d.close()});E.addEventListener("click",F);document.addEventListener("DOMContentLoaded",T);function x(){const t=document.querySelector("#book-title"),e=document.querySelector("#book-author"),o=document.querySelector("#book-pages");return!(!t.value||!e.value||!o.value)}function N(){return new C({title:b.value,author:h.value,pages:Number(y.value),isRead:g.checked})}function O(t){const e=document.createElement("div"),o=document.createElement("h3"),s=document.createElement("p"),n=document.createElement("p"),r=document.createElement("div"),c=document.createElement("button"),l=document.createElement("button");e.classList.add("card"),r.classList.add("buttons-container"),c.id="read-btn",l.id="remove-btn",o.textContent=t.title,s.textContent=t.author,n.textContent=`${t.pages} pages`,t.isRead?(c.textContent="Read",c.classList.add("active")):c.textContent="Not Read",l.textContent="Remove",c.addEventListener("click",A),l.addEventListener("click",P),e.appendChild(o),e.appendChild(s),e.appendChild(n),r.appendChild(c),r.appendChild(l),e.appendChild(r),p.appendChild(e)}function F(t){if(t.preventDefault(),!x()){k("Form is incompleted!");return}const e=N();if(i.isBookInLibrary(e)){k("Book is already in library!");return}i.addBookToLibrary(e),f(),m(),d.close(),console.log(i.Books)}function I(){b.value="",h.value="",y.value="",g.checked=!1,u.textContent="Add your book here!",u.classList.remove("error")}function k(t){u.textContent=t,u.classList.add("error")}function f(){localStorage.setItem("books",JSON.stringify(i.Books))}function T(){const t=localStorage.getItem("books");if(!t)return;const e=JSON.parse(t);console.log(e),e.forEach(o=>{i.addBookToLibrary(o)}),m()}function m(){w();for(const t of i.Books)O(t)}function w(){p.querySelectorAll(".card").forEach(e=>{e.remove()})}function B(t){return t.target.parentNode.parentNode.querySelector("h3").textContent}function P(t){const e=B(t);i.removeBook(e),f(),m()}function A(t){const e=B(t),o=i.bookLookup(e);o.isRead=!o.isRead,f(),m()}
